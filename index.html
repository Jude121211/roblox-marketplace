<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>roblox-marketplace</title>
<style>
/* Global */
* {box-sizing:border-box; margin:0; padding:0; font-family:'Segoe UI',sans-serif;}
body {background:linear-gradient(135deg,#1a0a2b,#4b1e70); color:#fff; min-height:100vh; display:flex; justify-content:center; align-items:flex-start; padding:20px;}
h2 {margin-bottom:10px;}

/* Container */
.container {width:100%; max-width:1000px; background:rgba(0,0,0,0.85); border-radius:15px; padding:20px; box-shadow:0 0 25px rgba(75,30,130,0.7); animation:fadeIn 1s ease forwards;}
@keyframes fadeIn {from{opacity:0; transform:translateY(-20px);} to{opacity:1; transform:translateY(0);}}

/* Tabs */
.tabs {display:flex; cursor:pointer; background: rgba(75,30,130,0.9); border-radius:10px; overflow:hidden; margin-bottom:20px;}
.tab {flex:1; text-align:center; padding:15px; transition:background 0.3s, transform 0.2s;}
.tab:hover {transform:translateY(-2px);}
.tab.active {background: linear-gradient(135deg,#8e2de2,#4a00e0); font-weight:bold;}

/* Tab content */
.tab-content {display:none; animation:fadeSlide 0.5s ease forwards;}
.tab-content.active {display:block;}
@keyframes fadeSlide {from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);}}

/* Form */
input,textarea,select,button {width:100%; padding:10px; margin:10px 0; border-radius:8px; border:none; outline:none; font-size:14px; transition:0.2s;}
input,textarea,select {background:rgba(255,255,255,0.1); color:#fff;}
input::placeholder, textarea::placeholder {color:#ccc;}
button {background: linear-gradient(135deg,#8e2de2,#4a00e0); color:#fff; font-weight:bold; cursor:pointer;}
button:hover {transform:translateY(-2px); box-shadow:0 5px 15px rgba(75,30,130,0.6);}

/* Marketplace cards */
.marketplace {display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:20px;}
.card {background: rgba(0,0,0,0.3); padding:15px; border-radius:12px; transition: transform 0.2s, box-shadow 0.2s;}
.card:hover {transform:scale(1.05); box-shadow:0 8px 25px rgba(75,30,130,0.5);}
.card h3 {margin-bottom:5px; color:#c084fc;}
.card p {margin:5px 0;}
.card button {margin-top:5px;}

/* Cart */
.cart {background: rgba(0,0,0,0.3); padding:15px; border-radius:12px; margin-top:20px;}
.cart ul {list-style:none; padding-left:0; max-height:200px; overflow-y:auto;}
.cart li {margin:5px 0; display:flex; justify-content:space-between; align-items:center;}
.cart li button {width:auto; padding:5px 10px; font-size:12px;}

/* Modals */
.modal, .approval-popup {position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; justify-content:center; align-items:center; display:none;}
.modal-content, .approval-content {background: rgba(50,0,80,0.95); padding:20px; border-radius:12px; width:350px; text-align:center; position:relative; animation:fadeIn 0.5s ease forwards;}
.close-btn {position:absolute; top:10px; right:10px; cursor:pointer; font-size:20px; font-weight:bold; color:#fff;}
.modal-content p, .approval-content p {margin:10px 0; word-break:break-word;}
.modal-content button, .approval-content button {margin-top:10px;}
</style>
</head>
<body>

<div class="container">

  <div class="tabs">
    <div class="tab active" data-tab="add">Add Account</div>
    <div class="tab" data-tab="marketplace">Marketplace</div>
    <div class="tab" data-tab="carttab">Cart</div>
    <div class="tab" data-tab="approvals">Approvals</div>
  </div>

  <!-- Add Account Tab -->
  <div class="tab-content active" id="add">
    <h2>List Account</h2>
    <input type="text" id="username" placeholder="Username (required)">
    <input type="text" id="currency" placeholder="Currency (required)">
    <textarea id="description" placeholder="Description"></textarea>
    <input type="text" id="password" placeholder="Password (visible after approval)">
    <input type="text" id="qr" placeholder="QR Code URL (optional)">
    <select id="paymentMethod" onchange="updateRequiredFields()">
      <option value="cashapp">CashApp</option>
      <option value="applepay">Apple Pay</option>
      <option value="venmo">Venmo</option>
      <option value="paypal">PayPal</option>
    </select>
    <input type="text" id="cashapp" placeholder="CashApp Tag $..." style="display:none;">
    <input type="text" id="phone" placeholder="Phone Number" style="display:none;">
    <button onclick="addAccount()">Publish</button>
  </div>

  <!-- Marketplace Tab -->
  <div class="tab-content" id="marketplace">
    <div class="marketplace" id="marketplaceGrid"></div>
  </div>

  <!-- Cart Tab -->
  <div class="tab-content" id="carttab">
    <div class="cart">
      <h2>Cart</h2>
      <ul id="cartItems"></ul>
      <button onclick="checkout()">Checkout</button>
    </div>
  </div>

  <!-- Approvals Tab -->
  <div class="tab-content" id="approvals">
    <h2>Pending Approvals (Seller)</h2>
    <ul id="approvalList"></ul>
  </div>

</div>

<!-- Buyer Payment Popup -->
<div class="modal" id="popup">
  <div class="modal-content">
    <span class="close-btn" onclick="closePopup()">&times;</span>
    <h2>Send Payment</h2>
    <div id="paymentInfo"></div>
    <button onclick="closePopup()">Close</button>
  </div>
</div>

<!-- Buyer Password Popup -->
<div class="approval-popup" id="approvalPopup">
  <div class="approval-content">
    <span class="close-btn" onclick="closeApprovalPopup()">&times;</span>
    <h2>Purchase Approved!</h2>
    <p id="approvalText"></p>
    <button onclick="closeApprovalPopup()">Close</button>
  </div>
</div>

<script>
// Global Data
let marketplace = [];
let cart = [];
let pending = [];

// Tabs
const tabs = document.querySelectorAll('.tab');
const tabContents = document.querySelectorAll('.tab-content');
tabs.forEach(tab => tab.addEventListener('click', () => {
  tabs.forEach(t=>t.classList.remove('active'));
  tab.classList.add('active');
  tabContents.forEach(tc=>tc.classList.remove('active'));
  document.getElementById(tab.dataset.tab).classList.add('active');
}));

// Conditional fields
function updateRequiredFields(){
  const method = document.getElementById("paymentMethod").value;
  const cashappInput = document.getElementById("cashapp");
  const phoneInput = document.getElementById("phone");
  cashappInput.style.display = "none";
  phoneInput.style.display = "none";
  if(method==="cashapp") cashappInput.style.display="block";
  if(method==="applepay") phoneInput.style.display="block";
}

// Add account (Seller)
function addAccount(){
  const username=document.getElementById("username").value.trim();
  const currency=document.getElementById("currency").value.trim();
  const description=document.getElementById("description").value.trim();
  const password=document.getElementById("password").value.trim();
  const qr=document.getElementById("qr").value.trim();
  const paymentMethod=document.getElementById("paymentMethod").value;
  const cashapp=document.getElementById("cashapp").value.trim();
  const phone=document.getElementById("phone").value.trim();

  if(!username||!currency||!password){alert("Username, Currency and Password required!"); return;}
  if(paymentMethod==="cashapp" && !cashapp.startsWith("$")){alert("CashApp tag required and must start with $"); return;}
  if(paymentMethod==="applepay" && !phone){alert("Phone number required for Apple Pay"); return;}

  marketplace.push({username,currency,description,password,qr,phone,cashapp,paymentMethod,sold:false});
  renderMarketplace();
  document.getElementById("username").value="";
  document.getElementById("currency").value="";
  document.getElementById("description").value="";
  document.getElementById("password").value="";
  document.getElementById("qr").value="";
  document.getElementById("cashapp").value="";
  document.getElementById("phone").value="";
}

// Render marketplace
function renderMarketplace(){
  const grid=document.getElementById("marketplaceGrid");
  grid.innerHTML="";
  marketplace.forEach((acc,i)=>{
    if(acc.sold) return;
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <h3>${acc.username}</h3>
      <p>${acc.description}</p>
      <p><b>Currency:</b> ${acc.currency}</p>
      <p>Payment: ${acc.paymentMethod}</p>
      <button onclick="addToCart(${i})">Add to Cart</button>
    `;
    grid.appendChild(card);
  });
}

// Cart
function addToCart(index){
  const acc = marketplace[index];
  if(acc.sold){alert("Already sold!"); return;}
  if(cart.find(c=>c.username===acc.username)){alert("Already in cart!"); return;}
  cart.push(acc); renderCart();
}
function renderCart(){
  const ul = document.getElementById("cartItems");
  ul.innerHTML="";
  cart.forEach((c,i)=>{
    const li=document.createElement("li");
    li.innerHTML=`${c.username} - ${c.currency} <button onclick="removeCart(${i})">Remove</button>`;
    ul.appendChild(li);
  });
}
function removeCart(i){cart.splice(i,1); renderCart();}

// Checkout
function checkout(){
  if(cart.length===0){alert("Cart empty!"); return;}
  const acc=cart[0];
  let html="";
  if(acc.qr) html+=`<img src="${acc.qr}" alt="QR"><br>`;
  if(acc.phone) html+=`Phone: ${acc.phone}<br>`;
  if(acc.cashapp) html+=`CashApp Tag: ${acc.cashapp}<br>`;
  html+=`Use ${acc.paymentMethod} to pay.`;
  document.getElementById("paymentInfo").innerHTML=html;
  document.getElementById("popup").style.display="flex";

  pending.push(acc);
  acc.sold=true;
  cart=[]; renderCart(); renderMarketplace(); renderPending();
}

// Approvals
function renderPending(){
  const list = document.getElementById("approvalList");
  list.innerHTML="";
  pending.forEach((p,i)=>{
    const li=document.createElement("li");
    li.innerHTML=`${p.username} - ${p.currency} <button onclick="approve(${i})">Approve</button>`;
    list.appendChild(li);
  });
}
function approve(i){
  const p=pending[i];
  document.getElementById("approvalText").textContent=`Purchase approved for ${p.username}! Password: ${p.password}`;
  document.getElementById("approvalPopup").style.display="flex";
  pending.splice(i,1); renderPending();
}

// Close popups
function closePopup(){document.getElementById("popup").style.display="none";}
function closeApprovalPopup(){document.getElementById("approvalPopup").style.display="none";}
</script>

</body>
</html>
